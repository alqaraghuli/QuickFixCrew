<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>QuickFixCrew - Post a Job</title>
</head>
<body>

<!-- JOB POST FORM START -->
<section id="job-post-form" style="padding: 40px 20px; background: #ffffff; max-width: 800px; margin: 40px auto; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
  <h2 style="text-align: center; color: #2e86ab; margin-bottom: 30px;">Post a Job</h2>
  <form id="jobForm" style="display: flex; flex-direction: column; gap: 20px;">
    <input type="text" name="name" placeholder="Your Name" required style="padding: 12px; font-size: 1rem; border: 1px solid #ccc; border-radius: 6px;" />

    <select name="service" required style="padding: 12px; font-size: 1rem; border: 1px solid #ccc; border-radius: 6px;">
      <option value="">Select Service Type</option>
      <option value="plumbing">Plumbing</option>
      <option value="electrical">Electrical</option>
      <option value="painting">Painting</option>
      <option value="furniture">Furniture Assembly</option>
      <option value="repairs">General Repairs</option>
      <option value="flooring">Flooring</option>
      <option value="yard">Yard Work</option>
    </select>

    <input type="text" name="address" placeholder="Job Address" required style="padding: 12px; font-size: 1rem; border: 1px solid #ccc; border-radius: 6px;" />

    <textarea name="description" rows="4" placeholder="Job Description" required style="padding: 12px; font-size: 1rem; border: 1px solid #ccc; border-radius: 6px;"></textarea>

    <input type="datetime-local" name="preferred_time" required style="padding: 12px; font-size: 1rem; border: 1px solid #ccc; border-radius: 6px;" />

    <button type="submit" style="background: #2e86ab; color: white; padding: 14px; font-size: 1.1rem; border: none; border-radius: 6px; cursor: pointer;">Submit Job</button>
  </form>
</section>
<!-- JOB POST FORM END -->

<!-- üî• Firebase Script START -->
<script type="module">
  // Import Firebase SDKs
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-app.js";
  import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-firestore.js";

  // Your Firebase configuration
  const firebaseConfig = {
    apiKey: "AIzaSyAoy88ndkrmPWoupL6NgGdfoRWzxtRGZPs",
    authDomain: "quickfixcrew-717cc.firebaseapp.com",
    projectId: "quickfixcrew-717cc",
    storageBucket: "quickfixcrew-717cc.appspot.com",
    messagingSenderId: "907519125984",
    appId: "1:907519125984:web:20eced6ae597eb454b2385"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // Handle form submission
  document.addEventListener("DOMContentLoaded", () => {
    const form = document.querySelector("#jobForm");

    form.addEventListener("submit", async (e) => {
      e.preventDefault(); // Prevent default submission

      const name = form.name.value;
      const service = form.service.value;
      const address = form.address.value;
      const description = form.description.value;
      const preferredTime = form.preferred_time.value;

      try {
        await addDoc(collection(db, "job_submissions"), {
          name,
          service,
          address,
          description,
          preferredTime,
          timestamp: serverTimestamp()
        });

        alert("‚úÖ Job submitted successfully!");
        form.reset();
      } catch (error) {
        console.error("‚ùå Error submitting job:", error);
        alert("Something went wrong. Please try again.");
      }
    });
  });
</script>
<!-- üî• Firebase Script END -->

</body>
</html>
